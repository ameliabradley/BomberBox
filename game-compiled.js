var n=!0,r=null,s=!1,t={qc:function(a){var d={};a=a||{};for(var b in t)d[b]=t[b];d.ra=[];d.qb=a.qb||t.Vb;return d},Vb:function(a,d){return a.ha-d.ha},push:function(a,d){this.ra.push({value:a,ha:d});this.ra.sort(this.qb)},pop:function(){return this.ra.shift()}};this.tc||function(a){function d(a,b){C=0;var d=c([],a,0);return C?s:b?e(d):d}function b(a){B="string"===typeof a?g(a):a;h=-1;return f()}function c(a,b,d){var e,f,l;if(b==r)a.push(192);else if(b===s)a.push(194);else if(b===n)a.push(195);else switch(typeof b){case "number":b!==b?a.push(203,255,255,255,255,255,255,255,255):Infinity===b?a.push(203,127,240,0,0,0,0,0,0):Math.floor(b)===b?0>b?-32<=b?a.push(224+b+32):-128<b?a.push(208,b+256):-32768<b?(b+=65536,a.push(209,b>>8,b&255)):-2147483648<b?(b+=4294967296,
a.push(210,b>>>24,b>>16&255,b>>8&255,b&255)):(f=Math.floor(b/4294967296),b&=4294967295,a.push(211,f>>24&255,f>>16&255,f>>8&255,f&255,b>>24&255,b>>16&255,b>>8&255,b&255)):128>b?a.push(b):256>b?a.push(204,b):65536>b?a.push(205,b>>8,b&255):4294967296>b?a.push(206,b>>>24,b>>16&255,b>>8&255,b&255):(f=Math.floor(b/4294967296),b&=4294967295,a.push(207,f>>24&255,f>>16&255,f>>8&255,f&255,b>>24&255,b>>16&255,b>>8&255,b&255)):((f=0>b)&&(b*=-1),l=Math.log(b)/0.6931471805599453+1023|0,d=b*Math.pow(2,1075-l),b=
d&4294967295,f&&(l|=2048),f=d/4294967296&1048575|l<<20,a.push(203,f>>24&255,f>>16&255,f>>8&255,f&255,b>>24&255,b>>16&255,b>>8&255,b&255));break;case "string":d=b.length;l=a.length;a.push(0);for(f=0;f<d;++f)e=b.charCodeAt(f),128>e?a.push(e&127):2048>e?a.push(e>>>6&31|192,e&63|128):65536>e&&a.push(e>>>12&15|224,e>>>6&63|128,e&63|128);e=a.length-l-1;32>e?a[l]=160+e:65536>e?a.splice(l,1,218,e>>8,e&255):4294967296>e&&a.splice(l,1,219,e>>>24,e>>16&255,e>>8&255,e&255);break;default:if(++d>=w)return C=1,
[];if(F(b)){e=b.length;16>e?a.push(144+e):65536>e?a.push(220,e>>8,e&255):4294967296>e&&a.push(221,e>>>24,e>>16&255,e>>8&255,e&255);for(f=0;f<e;++f)c(a,b[f],d)}else{l=a.length;a.push(0);e=0;for(f in b)++e,c(a,f,d),c(a,b[f],d);16>e?a[l]=128+e:65536>e?a.splice(l,1,222,e>>8,e&255):4294967296>e&&a.splice(l,1,223,e>>>24,e>>16&255,e>>8&255,e&255)}}return a}function f(){var a,b,d,c=0,l,k,g=B;b=g[++h];if(224<=b)return b-256;if(192>b){if(128>b)return b;144>b?(c=b-128,b=128):160>b?(c=b-144,b=144):(c=b-160,b=
160)}switch(b){case 192:return r;case 194:return s;case 195:return n;case 202:return c=16777216*g[++h]+(g[++h]<<16)+(g[++h]<<8)+g[++h],l=c>>23&255,k=c&8388607,!c||2147483648===c?0:255===l?k?NaN:Infinity:(c&2147483648?-1:1)*(k|8388608)*Math.pow(2,l-127-23);case 203:c=16777216*g[++h]+(g[++h]<<16)+(g[++h]<<8)+g[++h];b=c&2147483648;l=c>>20&2047;k=c&1048575;if(!c||2147483648===c)return h+=4,0;if(2047===l)return h+=4,k?NaN:Infinity;c=16777216*g[++h]+(g[++h]<<16)+(g[++h]<<8)+g[++h];return(b?-1:1)*((k|1048576)*
Math.pow(2,l-1023-20)+c*Math.pow(2,l-1023-52));case 207:return c=16777216*g[++h]+(g[++h]<<16)+(g[++h]<<8)+g[++h],4294967296*c+16777216*g[++h]+(g[++h]<<16)+(g[++h]<<8)+g[++h];case 206:c+=16777216*g[++h]+(g[++h]<<16);case 205:c+=g[++h]<<8;case 204:return c+g[++h];case 211:return c=g[++h],c&128?-1*(72057594037927936*(c^255)+281474976710656*(g[++h]^255)+1099511627776*(g[++h]^255)+4294967296*(g[++h]^255)+16777216*(g[++h]^255)+65536*(g[++h]^255)+256*(g[++h]^255)+(g[++h]^255)+1):72057594037927936*c+281474976710656*
g[++h]+1099511627776*g[++h]+4294967296*g[++h]+16777216*g[++h]+65536*g[++h]+256*g[++h]+g[++h];case 210:return c=16777216*g[++h]+(g[++h]<<16)+(g[++h]<<8)+g[++h],2147483648>c?c:c-4294967296;case 209:return c=(g[++h]<<8)+g[++h],32768>c?c:c-65536;case 208:return c=g[++h],128>c?c:c-256;case 219:c+=16777216*g[++h]+(g[++h]<<16);case 218:c+=(g[++h]<<8)+g[++h];case 160:l=[];b=h;for(a=b+c;b<a;)d=g[++b],l.push(128>d?d:224>d?(d&31)<<6|g[++b]&63:(d&15)<<12|(g[++b]&63)<<6|g[++b]&63);h=b;return 10240>l.length?y.apply(r,
l):e(l);case 223:c+=16777216*g[++h]+(g[++h]<<16);case 222:c+=(g[++h]<<8)+g[++h];case 128:for(k={};c--;){a=g[++h]-160;l=[];b=h;for(a=b+a;b<a;)d=g[++b],l.push(128>d?d:224>d?(d&31)<<6|g[++b]&63:(d&15)<<12|(g[++b]&63)<<6|g[++b]&63);h=b;k[y.apply(r,l)]=f()}return k;case 221:c+=16777216*g[++h]+(g[++h]<<16);case 220:c+=(g[++h]<<8)+g[++h];case 144:for(l=[];c--;)l.push(f());return l}}function e(a){try{return y.apply(this,a)}catch(b){}for(var e=[],c=0,d=a.length,f=u;c<d;++c)e[c]=f[a[c]];return e.join("")}function k(e,
c,d){function f(){if(4===w.readyState){var e,l=w.status,u={status:l,qa:200<=l&&300>l};if(!F++){if("PUT"===v)e=u.qa?w.responseText:"";else if(u.qa){if(c.ca&&a.Mb){e=new Worker(msgpack.ca);e.onmessage=function(a){d(a.data,c,u)};e.postMessage({method:"unpack",data:w.responseText});k();return}e=q?p(w):g(w.responseText);e=b(e)}m&&m(w,c,u);d(e,c,u);k()}}}function l(a,b){if(!F++){var e={status:b||400,qa:s};m&&m(w,c,e);d(r,c,e);k(a)}}function k(b){b&&w&&w.abort&&w.abort();u&&(clearTimeout(u),u=0);w=r;a.addEventListener&&
a.removeEventListener("beforeunload",l,s)}var u=0,v=c.method||"GET",h=c.yd||{},B=c.hd,m=c.fd,y=c.data||r,w=a.XMLHttpRequest?new XMLHttpRequest:a.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):r,F=0,C,Ba="GET"===v&&c.Da;try{w.onreadystatechange=f;w.open(v,e,n);B&&B(w,c);Ba&&w.overrideMimeType&&w.overrideMimeType("text/plain; charset=x-user-defined");y&&w.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(C in h)w.setRequestHeader(C,h[C]);a.addEventListener&&a.addEventListener("beforeunload",
l,s);w.send(y);u=setTimeout(function(){l(1,408)},1E3*(c.timeout||10))}catch(Za){l(0,400)}}function g(a){var b=[],e=l,c=a.split(""),d=-1,f;f=c.length;for(a=f%8;a--;)++d,b[d]=e[c[d]];for(a=f>>3;a--;)b.push(e[c[++d]],e[c[++d]],e[c[++d]],e[c[++d]],e[c[++d]],e[c[++d]],e[c[++d]],e[c[++d]]);return b}function p(a){var b=[],e,c,d,f,g,l,k,u,v,h=-1,B;B=vblen(a);a=vbstr(a);c=Math.ceil(B/2);for(e=c%8;e--;)d=a.charCodeAt(++h),b.push(d&255,d>>8);for(e=c>>3;e--;)d=a.charCodeAt(++h),c=a.charCodeAt(++h),f=a.charCodeAt(++h),
g=a.charCodeAt(++h),l=a.charCodeAt(++h),k=a.charCodeAt(++h),u=a.charCodeAt(++h),v=a.charCodeAt(++h),b.push(d&255,d>>8,c&255,c>>8,f&255,f>>8,g&255,g>>8,l&255,l>>8,k&255,k>>8,u&255,u>>8,v&255,v>>8);B%2&&b.pop();return b}function m(b){var e=[],c=0,d=-1,f=b.length,g=[0,2,1][b.length%3],c=u,l=v;if(a.btoa){for(;d<f;)e.push(c[b[++d]]);return btoa(e.join(""))}for(--f;d<f;)c=b[++d]<<16|b[++d]<<8|b[++d],e.push(l[c>>18&63],l[c>>12&63],l[c>>6&63],l[c&63]);1<g&&(e[e.length-2]="=");0<g&&(e[e.length-1]="=");return e.join("")}
a.tc={bb:d,tb:b,ca:"msgpack.js",upload:function(b,e,c){e.method="PUT";e.Da=n;if(e.ca&&a.Mb){var f=new Worker(msgpack.ca);f.onmessage=function(a){e.data=a.data;k(b,e,c)};f.postMessage({method:"pack",data:e.data})}else e.data=m(d(e.data)),k(b,e,c)},md:function(a,b,e){b.method="GET";b.Da=n;k(a,b,e)}};var q=/MSIE/.test(navigator.userAgent),l={},u={},v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),B=[],h=0,C=0,F=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},
y=String.fromCharCode,w=512;self.importScripts&&(onmessage=function(a){"pack"===a.data.method?postMessage(m(d(a.data.data))):postMessage(b(a.data.data))});(function(){for(var a=0,b;256>a;++a)b=y(a),l[b]=a,u[a]=b;for(a=128;256>a;++a)l[y(63232+a)]=a})();q&&document.write('<script type="text/vbscript">Function vblen(b)vblen=LenB(b.responseBody)End Function\nFunction vbstr(b)vbstr=CStr(b.responseBody)+chr(0)End Function\x3c/script>')}(this);function x(a){var d=0,b={},c={};each(a,function(a,f){var g=parseInt(a)+d;b[d]=f;d=c[d]=g});var f=Math.floor(Math.random()*d);each(b,function(a,b){f>=parseInt(a)&&f<c[a]&&b&&b()})}
function z(a,d,b,c,f,e){var k=s;"undefined"==typeof k&&(k=n);"undefined"===typeof e&&(e=5);a.beginPath();a.moveTo(d+e,b);a.lineTo(d+c-e,b);a.quadraticCurveTo(d+c,b,d+c,b+e);a.lineTo(d+c,b+f-e);a.quadraticCurveTo(d+c,b+f,d+c-e,b+f);a.lineTo(d+e,b+f);a.quadraticCurveTo(d,b+f,d,b+f-e);a.lineTo(d,b+e);a.quadraticCurveTo(d,b,d+e,b);a.closePath();k&&a.stroke();a.fill()}function aa(a,d,b,c){var f=0,e=0,f=b-a,e=c-d;return Math.sqrt(f*f+e*e)}
function A(a,d,b,c,f,e){function k(l,v,B){l=[[l,v+1],[l,v-1],[l+1,v],[l-1,v]];p[B]={};each(l,function(l,u){var v=u[0],y=u[1],w=a.n(v,y),q=a.hc(v,y),I=n,D=1;aa(f,e,v,y)>c||(d&&each(d,function(a,e){if(q[e]){var c=b[a];if(c===s)return I=s;D=c}}),I&&(p[B][w]=D,p[w]||(each(a.s(v,y),function(a,b){b.oa(g)&&m.push(b)}),k(v,y,w))))})}var g=ba,p={},m=[],q=a.n(f,e);k(f,e,q);var l;each(m,function(b,e){var c=a.n(e.x,e.y).toString(),d=q.toString(),f={},g={};g[d]=0;var k=t.qc();k.push(d,0);for(var m,T,I,D,X,Aa;k;){m=
k.pop();T=m.value;m=m.ha;I=p[T]||{};for(var E in I){D=I[E];D=m+D;X=g[E];if((Aa="undefined"===typeof g[E])||X>D)g[E]=D,k.push(E,D),f[E]=T;if(E===c){k=r;break}}}if("undefined"===typeof g[c])throw Error(["Could not find a path from ",d," to ",c,"."].join(""));for(d=[];c;)d.push(c),c=f[c];d.reverse();l==r?l=d:d.length<l.length&&(l=d)});return l}
window.Gd=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};window.Zb=function(a){for(var d in a)if(a.hasOwnProperty(d)&&(void 0)(d,a[d])===s)break};
window.Tc=function(){function a(){b++;b==d&&e()}var d=0,b=0,c={},f=[],e;return{za:function(b){d++;var e=new Image;e.onload=a;e.Mc=b;c[b]=e;f.push(b)},Sa:function(a){var b=c[a];if(b)return b;throw'Could not find image "'+a+'".';},ab:function(a){e=a;each(f,function(a,b){var e=c[b];e.src="images/"+e.Mc})}}}();function ca(a,d,b,c,f){var e=this;c=new da(a,d,b,c);e.aa=function(b,e){for(var c=a.s(b,e),d=c.length,f=0!=d;d--;)if(c[d].oa(ea))return s;new G(a,b,e);return!f};e.uc=function(){new G(a,d,b);for(var c=0;c<f;c++){var g=c+1,p=n,m=n,q=n,l=n;a.setTimeout(function(a){return function(){if(!p||!e.aa(d-a,b))p=s;if(!m||!e.aa(d+a,b))m=s;if(!q||!e.aa(d,b-a))q=s;if(!l||!e.aa(d,b+a))l=s}}(g),100*g)}};c.La(e.uc)};function da(a,d,b,c){var f=this,e,k=s,g;f.Lc=function(){e.b(H.Kb);a.setTimeout(function(){e.b(H.ya)},300)};f.Pa=function(){k!=n&&(k=n,e.g(),g&&g())};f.La=function(k){if(a.u(d,b,[J]))k&&k();else{e=new K(a);e.b(H.ya);e.f(d,b);e.i(L);e.i(fa);a.c(e);g=k;e.F(f.Pa);if(c)var m=new M(function(a){a==c?f.Pa():(f.Lc(),e.G((c-a).toString()))},a.setTimeout,1E3,c);m&&m.start()}}};function ga(){var a=new ha,d=3,b=1;self.Za=function(){return a};self.d=function(c,f){a.d(c,f,"WEAPON_BOMB",{vb:function(a,f){new ca(c,a,f,d,b)},Ga:function(a,b){return!c.u(a,b,[J])},ba:function(a){if(a=a.Ea)a.timeout&&(d=a.timeout),a.Y&&(b=a.Y)}})}};function G(a,d,b){if(!a.u(d,b,[J])){var c=new K(a);c.b(H.zb);c.f(d,b);a.c(c);a.ib("frag",d,b);a.ib("superFrag",d,b);a.setTimeout(function(){c.b(H.Ab);a.setTimeout(function(){c.g()},100)},100)}};function ia(){var a,d,b;self.shift=function(c){switch(c){case "left":d-=1;break;case "right":d+=1;break;case "up":b-=1;break;case "down":b+=1}a.l(d,b)};self.d=function(c,f,e){a=c;d=f;b=e}};function ja(a,d,b,c,f){function e(){new G(a,d,b)}(new da(a,d,b,c)).La(function(){new G(a,d,b);for(var c=0;c<f;c++){var g=c+1;a.setTimeout(function(c){return function(){var f=2*c,f=new N(d-c,b-c,f,f);a.Q(f,e)}}(g),100*g)}})};function ka(){var a=new ha,d=3,b=1;this.Za=function(){return a};this.d=function(c,f){a.d(c,f,"WEAPON_CARPET_BOMB",{vb:function(a,f){new ja(c,a,f,d,b)},Ga:function(a,b){return!c.u(a,b,[J])},ba:function(a){if(a=a.Ea)a.timeout&&(d=a.timeout),a.Y&&(b=a.Y)}})}};function la(a,d,b){var c=new K(a),f=new O(a,c),e;c.b(H.wa);c.f(d,b);a.c(c);c.F(function(){a.S(c,function(b,c){x({1:function(){new P(a,b,c,3)},2:function(){new P(a,b,c,2)}})});c.g()});c.A=function(a){a.z&&a.z("Charger")};this.v=function(){if(!c.J()){var b=A(a,[L,Q],[s,s,s],5,c.x,c.y),d;b?(e=b.splice(1),d=a.la(e.splice(0,1))):e&&(d=a.la(e.splice(0,1)),f.Ua(d[0],d[1])||(e=r));e?(f.M(450),f.move(d[0],d[1],4),c.b(H.xb),0==e.length&&(e=r)):(f.M(900),c.b(H.wa),f.v())}};f.ta(this.v)};window.wb=function(){var a=this,d;new ma;a.kb=r;document.onkeyup=function(b){if((b=b?b:window.event?event:r)&&!a.a.pa())switch(b.keyCode){case 37:case 65:a.L(R,na);break;case 38:case 87:a.L(R,oa);break;case 39:case 68:a.L(R,pa);break;case 40:case 83:a.L(R,qa);break;case 32:a.L(ra);break;case 81:a.e.Ka();break;case 69:a.e.$a()}};a.K=function(){a.e.cb(d);requestAnimFrame(a.K)};a.start=function(){window.onresize=function(){a.I()};a.a=new sa;a.e=new ta(a,a.a);d=document.getElementById("canvas").getContext("2d");
a.I();ResourceManager.za("btn_play.png");ResourceManager.ab(function(){a.e.Fa();a.K()})};a.I=function(){d.canvas.width=window.innerWidth;d.canvas.height=window.innerHeight;a.e.lb()};a.Ca=function(a){return $("<div />").q({left:a.rb}).ea({left:a.Oa},{h:a.h,duration:a.duration,step:function(c){a.step(c)},complete:a.complete})};a.pc=function(b,c){switch(b){case ua:a.a.T(c);break;case va:a.a.reset();break;case wa:var d=new K(a.a);d.T(c);a.a.Ja(d.k(),d);break;case xa:a.a.Wb(c);break;case ya:a.a.sc(c[0],
c[1],c[2]);break;case za:a.a.Rb(c[0],c[1],c[2],c[3]);break;case Ca:a.a.fa(c);break;case Da:a.e.l(c[0],c[1],r,{h:"linear",duration:800})}};a.od=function(a){for(a=a.length;a--;);};a.L=function(b,c){var d=msgpack.bb([b,c],n);console.debug("CLIENT: '"+d+"'");a.kb(d)};a.yc=function(b){var c=msgpack.tb(b),d=c[0],c=c[1];console.debug("SERVER: '"+b+"'");a.pc(d,c)}};function ma(){var a={};this.kd=function(d,b){a[0]=b};this.Pd=function(d,b){a[0].update(b)}};function Ea(){var a={},d={};self.rc=function(b){var c=S,f=S,e=document.createElement("canvas");e.width=c;e.height=f;c=e.getContext("2d");a[b]=e;return d[b]=c};self.gc=function(b){return a[b]};self.getContext=function(a){return d[a]}};function M(a,d,b,c){var f=this;f.Ha=s;f.start=function(e){f.Ha||(e||(e=0),a(e),e>=c||d(function(){var a=e+1;a>c&&(a=c);f.start(a)},b))};f.cancel=function(){f.Ha=n}};function Fa(a,d,b){var c=new K(a),f=new O(a,c);c.b(H.da);c.f(d,b);a.c(c);c.F(function(){a.S(c,function(b,c){x({1:function(){new P(a,b,c,4)},2:function(){new P(a,b,c,3)}})});c.g()});c.A=function(a){a.z&&a.z("Ghost")};this.v=function(){if(!c.J()){var b=A(a,[Ga,Q,fa,L],[s,s,s,3],8,c.x,c.y);b?(b=a.la(b[1]),a.u(b[0],b[1],[L])?(f.M(1E3),c.b(H.Bb),f.move(b[0],b[1],20)):(f.M(450),c.b(H.da),f.move(b[0],b[1],4))):(c.b(H.da),f.M(450),f.v())}};f.ta(this.v)};function Ha(){function a(){var a=g.mc(e);return 0<a?1-a/b:0}var d=this,b,c,f=n,e,k,g;d.Qc=function(){c&&c.Pc(a())};d.Ec=function(a){c=a};d.ub=function(){d.Qc();k=g.setTimeout(function(){d.ub()},100)};d.Kc=function(){!f&&c&&c.vc();return f};d.ga=function(){g.clearTimeout(e);g.clearTimeout(k);f=n;c.ac()};d.Dc=function(c){b=c;0>=a()&&d.ga()};d.Oc=function(){return 0==b?n:f?(f=s,c.Ic(),d.ub(),e=g.setTimeout(function(){d.ga()},b),n):s};d.d=function(a,c){g=a;b=c;g.Aa(function(){d.ga()})}};function P(a,d,b,c){var f=new K(a);f.b(H.Cb);f.f(d,b);f.G(c.toString());a.c(f);f.sa(function(a){a.Na&&(a.Na(c),f.g())})};function Ia(){function a(a){each(m,function(b,c){c(a)})}var d=this,b,c,f,e,k,g,p,m=[];d.kc=function(){return g};d.td=function(){return b};d.sd=function(){return c};d.ud=function(){return f};d.rd=function(){return e};d.vd=function(){return k};d.fa=function(){p(Ca,g.k())};d.Ob=function(){var a=f.jc();a&&a.Nb(g.x,g.y)};d.Ba=function(a){var b;switch(a){case "WEAPON_BOMB":b=new ga;break;case "WEAPON_CARPET_BOMB":b=new ka}b.d(k,e);f.Ba(b.Za())};d.shift=function(a){if(!g.J()){var b=g.x,c=g.y;switch(a){case na:b-=
1;break;case pa:b+=1;break;case oa:c-=1;break;case qa:c+=1}k.u(b,c,[L])?d.fa():(k.o(g,b,c),p(Da,[b,c]))}};d.dd=function(a){m.push(a)};d.pb=function(f,l,u){k=f;e.pb(k);g=new K(k);g.b(H.xa);g.f(l,u);g.G("P");g.i(ba);k.c(g);g.sb=function(a,b){d.a.setTimeout(function(){d.a.o(g,a,b);d.a.l(a,b)},100)};g.Na=function(a){c.Ad(a)};g.z=function(b){g.g();a(b)};g.F(function(){g.g();a("Bomb")});b||(b=new StoreControl,b.d(d))};d.d=function(a){e=new EnergyManager;e.d(20,50,1);f=new Ja;f.d();c=new MoneyControl;c.d();
p=a}};function Ka(a,d,b){var c=new K(a),f,e;c.b(H.Jb);c.f(d,b);c.G("T");a.c(c);this.Jc=function(a){e=n;a.sb(c.x,c.y)};this.ob=function(a){f=a};this.pd=function(a){a[0]=f;a[1]=e};c.sa(function(a){e?e=s:a.sb&&f.Jc(a)})};function N(a,d,b,c){var f=b/2+a,e=c/2+d;self.Ta=function(){return a};self.ic=function(){return a+b};self.Ya=function(){return d};self.qd=function(){return d+c};self.ka=function(){return{x:f,y:e}};self.Wa=function(){return b};self.Va=function(){return c}};function La(a,d,b){var c=new K(a),f=new O(a,c);c.b(H.Lb);c.f(d,b);a.c(c);c.F(function(){a.S(c,function(b,c){x({80:r,1:function(){new P(a,b,c,1)}})});c.g()});c.A=function(a){a.z&&a.z("Sentry")};f.ta()};window.Uc=function(){var a=this,d,b,c=[];document.onkeyup=function(b){if(b=b?b:window.event?event:r){switch(b.keyCode){case 27:a.reset();break;case 80:a.a.Nc()}if(!a.a.pa())switch(b.keyCode){case 37:case 65:d.shift("left");break;case 38:case 87:d.shift("up");break;case 39:case 68:d.shift("right");break;case 40:case 83:d.shift("down");break;case 81:a.e.Ka();break;case 69:a.e.$a()}}};a.Ca=function(a){return $("<div />").q({left:a.rb}).ea({left:a.Oa},{h:a.h,duration:a.duration,step:function(b){a.step(b)},
complete:a.complete})};a.I=function(){b.canvas.width=window.innerWidth;b.canvas.height=window.innerHeight;a.e.lb()};a.D=function(b,d){each(c,function(c,g){a.jb(g,b,d)})};a.jb=function(a,b,c){b=msgpack.bb([b,c],n);a.yc(b)};a.Pb=function(b){c.push(b);var d=a.a.$();a.jb(b,ua,d);var k=new Ia;k.d(a.D);b.kb=function(a){a=msgpack.tb(a);var b=a[1];switch(a[0]){case R:k.shift(b);break;case ra:k.Ob()}};k.pb(a.a,3,0)};a.start=function(){setTimeout(function(){if(parent.frames.Ia){var b=parent.frames.Ia,c=b.Ia,
c=new b.wb;c.start();a.Pb(c)}},1E3);$("body").gd("id","interfaceKeyboard");window.onresize=function(){a.I()};d=new ia;a.a=new sa;a.a.Gc({reset:function(){a.D(va)},c:function(b){a.D(wa,b.$())},R:function(b){a.D(xa,b.k())},o:function(b,c,d){a.D(ya,[b.k(),c,d])},P:function(b,c,d,g){a.D(za,[b.k(),c,d,g])}});a.e=new ta(a,a.a);b=document.getElementById("canvas").getContext("2d");a.I();a.reset();ResourceManager.za("btn_play.png");ResourceManager.ab(function(){a.e.Fa();a.K()})};a.K=function(){a.e.cb(b);requestAnimFrame(a.K)};
a.reset=function(){a.a.reset();a.ec();d.d(a.e,3,0)};a.cc=function(b){a.a.Q(b,a.a.j);b=b.ka();var c=new K(a.a);c.b(H.Eb);c.f(b.x,b.y);c.G("F");a.a.c(c);c.sa(function(){a.reset()});a.a.j(b.x+1,b.y);a.a.j(b.x+1,b.y-1);a.a.j(b.x+1,b.y+1);a.a.j(b.x,b.y+1);a.a.j(b.x,b.y-1)};a.fc=function(b){a.a.Q(b,a.a.j);b=b.ka();var c=new K(a.a);c.b(H.yb);c.f(b.x,b.y);c.G("S");a.a.c(c)};a.dc=function(b){var c=b.Ta(),d=b.Ya(),g=b.Wa()-2,p=b.Va()-2;a.a.Q(b,a.a.j);for(b=g+1;b--;)for(g=p+1;g--;){var m=c+b+1,q=d+g+1;1==b%
2&&1==g%2?a.a.Ub(m,q):x({30:function(){a.a.Tb(m,q)},3:function(){new la(a.a,m,q)},10:function(){new La(a.a,m,q)},1:function(){new la(a.a,m,q)},2:function(){new Fa(a.a,m,q)},300:r})}};a.ec=function(){var b=[],c=0,d=0,g=6,p=6,m=new N(c,-g/2,p,g);a.fc(m);b.push(m);for(var c=c+(p+2),q=1;q--;)p=Math.floor(11*Math.random()+5),g=Math.floor(11*Math.random()+5),0!=p%2&&(p+=1),0!=g%2&&(g+=1),m=new N(c,-g/2,p,g),a.dc(m),b.push(m),d=Math.max(d,g),c+=p+2;g=6;p=4;m=new N(c,-g/2,p,g);a.cc(m);c+=p+2;b.push(m);each(b.slice(0,
-1),function(b,c){for(var d=c.ka(),e=c.ic(),g=e+3;e<g;e++)a.a.H(e,d.y),a.a.H(e,d.y-1),a.a.H(e,d.y+1),a.a.H(e,d.y-2),a.a.H(e,d.y+2),a.a.ia(e,d.y),a.a.ia(e,d.y-1),a.a.ia(e,d.y+1),a.a.j(e,d.y-2),a.a.j(e,d.y+2)});a.e.l(c/2,d/2,0.2,{duration:1500,h:"easeInOutQuad"});a.a.setTimeout(function(){a.e.l(3,0,void 0,{duration:1500,h:"easeInOutQuad"})},1500)}};function K(a){var d=this,b={},c="",f=0,e=0,k=s,g,p,m,q,l,u,v;d.N=0;d.O=0;d.x=0;d.y=0;d.b=function(a){p=a[Ma];g=a};d.lc=function(){return p};d.Xa=function(){return g};d.G=function(a){c=a};d.ma=function(){return c};d.g=function(b){k=n;a.R(d,b)};d.Jd=function(a){v=a};d.U=function(){return v};d.J=function(){return k};d.i=function(a){b[a]=n};d.oa=function(a){return b[a]};d.nc=function(){return b};d.nb=function(a,b){e=a;f=b};d.V=function(){return e};d.W=function(){return f};d.Id=function(){};d.F=function(a){q=
a};d.Fc=function(a){l=a};d.sa=function(a){u=a};d.nd=function(){q&&q()};d.Ld=function(){l&&l()};d.zd=function(a){u&&u(a)};d.f=function(a,b){d.x=a;d.y=b};d.mb=function(a){m=a};d.k=function(){return m};d.$=function(){return[b,c,f,e,k,g[Na],d.x,d.y,d.N,d.O,m]};d.T=function(a){b=a[0];c=a[1];f=a[2];e=a[3];k=a[4];d.b(H[Oa[a[5]]]);d.x=a[6];d.y=a[7];d.N=a[8];d.O=a[9];m=a[10]}};function O(a,d){var b=this,c=[],f=1E3,e;b.move=function(e,g,f){var m=a.n(e,g);c[m]||(c[m]=0);c[m]++;a.P(d,e,g,f||10,function(){b.hb()})};b.M=function(a){f=a};b.hb=function(){a.setTimeout(e,f)};b.Ua=function(b,d){if(a.u(b,d,[L,Q]))return s;var e=a.n(b,d);c[e]||(c[e]=0);return c[e]};b.v=function(){if(!d.J()){for(var a=[[d.x,d.y+1],[d.x,d.y-1],[d.x+1,d.y],[d.x-1,d.y]],c=[],e=s,f,q=0;q<a.length;q++)f=a[q],f=b.Ua(f[0],f[1]),f!==s&&(0==c.length||f<e?(c=[q],e=f):f==e&&c.push(q));e===s?b.hb():(c=c[Math.floor(Math.random()*
c.length)],f=a[c],b.move(f[0],f[1]))}};b.ta=function(c){e=c||b.v;a.setTimeout(e,Math.floor(Math.random()*f)+f)}};function ha(){var a,d,b,c,f,e;self.k=function(){return a};self.getName=function(){return d};self.Cc=function(a){e.Ec(a)};self.Nb=function(a,d){var p=e.Kc(),m=f.Nd(c),q=b.Ga(a,d);p&&m&&q&&e.Oc()&&f.Od(c)&&b.vb(a,d)};self.ba=function(a){var f=a.va;f.name&&(d=f.name);f.p&&e.Dc(f.p);f.r&&(c=f.r);b.ba(a)};self.d=function(k,g,p,m){var q=Pa[p];a=p;f=g;d=q.t.name;c=q.ua.r;b=m;e=new Ha;e.d(k,q.ua.p)}};function Ja(){var a=this,d=[],b={},c,f=0;a.Md=function(){f++;f>=d.length&&(f=0);a.Hc(f)};a.Qd=function(a,c){b[a].ba(c)};a.Hc=function(a){f=a;c.zc("selected");c.$b(f).cd("selected")};a.Ba=function(a){var f=d.length;d.push(a);b[a.k()]=a;var g=c.$b(f),p=g.find(".slotCooldown");g.zc("disabled");a.Cc({vc:function(){g.q({outlineColor:"white"});p.q({backgroundColor:"white"});setTimeout(function(){g.q({outlineColor:""});p.q({backgroundColor:""})},100)},Ic:function(){p.q({height:"0%",backgroundColor:"rgba(255,255,255,0.5)"})},
Pc:function(a){p.q({height:Math.floor(100*a)+"%"})},ac:function(){p.ea({height:"100%",backgroundColor:"rgba(255,255,255,1)"},{duration:200,complete:function(){p.ea({height:"100%",backgroundColor:"rgba(255,255,255,0)"},{duration:100})}})}})};a.jc=function(){return d[f]};a.d=function(){c=$("#weaponSelectionContainer .weaponSlot");c.Zb(function(){$(this).xd({Ed:n})})}};function sa(){var a=this,d=0,b=[],c={},f,e=0,k={},g=0,p=[],m=[],q=[];a.Aa=function(a){q.push(a)};a.Gc=function(a){f=a};a.setTimeout=function(a,b){if(g)p.push([a,b]);else{var c={start:new Date,Z:b},d=function(){delete k[c.wc];a()},e=window.setTimeout(d,b);c.bc=d;c.id=e;c.wc=e;k[e]=c;return e}};a.pa=function(){return g?n:s};a.Nc=function(){g?a.Bc():a.pause()};a.pause=function(){g||(g=new Date,each(k,function(a,b){window.clearTimeout(b.id);b.Z-=g-b.start}),each(m,function(a,b){b.Cd()}))};a.Bc=function(){if(g){var b=
new Date;each(k,function(a,c){c.start=b;c.id=window.setTimeout(c.bc,c.Z)});g=r;each(p,function(b,c){a.setTimeout(c[0],c[1])});each(m,function(a,b){b.Dd()})}};a.ed=function(a){m.push(a)};a.clearTimeout=function(a){var b=k[a];b&&(window.clearTimeout(b.id),delete k[a])};a.Sb=function(){each(k,function(a,b){window.clearTimeout(b.id)});k={}};a.mc=function(a){a=k[a];return!a?0:a.start.getTime()+a.Z-new Date};a.reset=function(){f&&f.reset();for(var l in b){var g=b[l];if(g&&g.length)for(var v=0;v<g.length;v++)g[v].g(n)}d=
0;c={};b=[];e=0;a.Sb();each(q,function(a,b){b()})};a.ib=function(b,c,d){c=a.s(c,d);for(d=0;d<c.length;d++){var e=c[d];if(e[b])e[b]()}};a.s=function(c,d){var e=a.n(c,d);return!b[e]?[]:b[e]};a.hc=function(b,c){var d={};each(a.s(b,c),function(a,b){each(b.nc(),function(a,b){d[a]=b})});return d};a.u=function(b,c,d){b=a.s(b,c);for(c=0;c<b.length;c++)for(var e=b[c],f=0;f<d.length;f++)if(e.oa(d[f]))return n;return s};a.n=function(a,b){return a<<U|b&Qa};a.la=function(a){return[a>>U,a<<U>>U]};a.H=function(b,
c){each(a.s(b,c),function(a,b){b.g()})};a.c=function(b,c){a.Ja(d,b);f&&(!c&&!b.U())&&f.c(b);return b};a.Ja=function(b,e){e.mb(b);c[b]=e;d++;a.o(e,e.x,e.y,n)};a.jd=function(b){var c=new K(a);c.b(b);c.mb(e);e++;return c};a.j=function(b,c){var d=new K(a);d.b(H.Ib);d.f(b,c);d.i(Ga);d.i(L);d.i(Q);d.i(ea);a.c(d)};a.ia=function(b,c){var d=new K(a);d.b(H.Db);d.f(b,c);d.i(Q);d.i(J);a.c(d)};a.Ub=function(b,c){var d=new K(a);d.b(H.Hb);d.f(b,c);d.i(L);a.c(d);d.Fc(function(){d.g()})};a.S=function(b,c){var d=b.x,
e=b.y;a.setTimeout(function(){c(d,e)},10)};a.Tb=function(b,c){var d=new K(a);d.b(H.Gb);d.f(b,c);d.i(L);a.c(d);d.F(function(){a.S(d,function(b,c){x({4:function(){new P(a,b,c,1)}})});d.g()})};a.ld=function(b,c,d,e){b=new Ka(a,b,c);d=new Ka(a,d,e);b.ob(d);d.ob(b)};a.R=function(b,d){f&&(!d&&!b.U())&&f.R(b);a.ja(b);delete c[b.k()]};a.ja=function(b,c,d){void 0==c&&(c=b.x);void 0==d&&(d=b.y);for(var e=a.s(c,d),f=0;f<e.length;f++)if(b.k()==e[f].k()){e.splice(f,1);(c!=b.N||d!=b.O)&&a.ja(b,b.N,b.O);break}};
a.o=function(c,d,e,g){f&&(!g&&!c.U())&&f.o(c,d,e);a.ja(c);c.nb(d*V,e*V);c.x=d;c.y=e;d=a.n(d,e);b[d]||(b[d]=[]);b[d].push(c);each(b[d],function(a,b){b.A&&b.A(c);c.A&&c.A(b)})};a.sc=function(b,d,e){a.o(c[b],d,e)};a.Rb=function(b,d,e,f){a.P(c[b],d,e,f)};a.Wb=function(b){a.R(c[b])};a.P=function(c,d,e,g,h){f&&!c.U()&&f.P(c,d,e,g);var k=(d*V).toString(),m=(e*V).toString();c.N=d;c.O=e;var y=a.n(d,e);b[y]||(b[y]=[]);b[y].push(c);(new M(function(b){if(!c.J())if(b=g-b,0==b)a.o(c,d,e,n),h&&h();else{var f=c.V(),
y=c.W();c.nb(Math.floor(f+(k-f)/b),Math.floor(y+(m-y)/b))}},a.setTimeout,30,g)).start()};a.Q=function(a,b){for(var c=a.Wa(),d=a.Va(),e=a.Ta(),f=a.Ya(),g=0;g<=c;g++)b(e+g,f),b(e+g,f+d);for(g=1;g<d;g++)b(e,f+g),b(e+c,f+g)};a.na=function(){return c};a.fa=function(b){var d=c[b];d.b(H.Fb);a.setTimeout(function(){d.b(H.xa)},100)};a.kc=function(a){return c[a]};a.$=function(){var a={};each(c,function(b,c){var d=c.$();a[b]=d});return a};a.T=function(b){each(b,function(b,e){var f=new K(a);f.T(e);c[b]=f;d++;
a.o(f,f.x,f.y,n)})}};function ta(a,d){var b=this,c,f,e=0,k=0,g=0,p=0,m=1,q=1,l=new Ea,u,v,B,h,C,F;b.Kd=function(a){q=a;b.l(c,f,q)};b.wd=function(){return q};b.Hd=function(){q=0.75;b.l(c,f,q)};b.Ka=function(){0.25>q||(q/=2,b.l(c,f,q,{duration:1500,h:"easeInOutQuad"}))};b.$a=function(){5<q||(q*=2,b.l(c,f,q,{duration:1500,h:"easeInOutQuad"}))};b.X=function(){F=r;u=-g/2/m-k-S;v=-p/2/m-e-S;B=g/2/m-k;h=p/2/m-e};b.lb=function(){var a=window.innerHeight;g=window.innerWidth;p=a;b.X()};b.l=function(d,g,h,l){b.m&&(b.m.stop(),b.m=
s);var p=b.Ra(d,g),u=h||q;if(l!==s){h=l||{};var v=p.x,E=p.y;b.m=a.Ca({rb:0,Oa:1,h:h.h?h.h:"easeOutQuad",duration:h.duration||1E3,step:function(a){k=Math.floor(k+(v-k)*a);e=Math.floor(e+(E-e)*a);m+=(u-m)*a;b.X()},complete:function(){b.m=s}})}else k=p.x,e=p.y,m=u,b.X();c=d;f=g};b.Bd=function(a,d,g){b.m&&b.m.cancel();var h=b.Ra(a,d),l=h.x,p=h.y,u=g||q;b.m=new M(function(a){a=10-a;0!=a&&(k=Math.round(k+(l-k)/a),e=Math.round(e+(p-e)/a),m+=(u-m)/a,b.X())},b.setTimeout,30,10);b.m.start();c=a;f=d};b.oc=function(a){for(var b=
a.data,c=0,d=b.length;c<d;c+=4){var e=0.3*b[c]+0.59*b[c+1]+0.11*b[c+2];b[c]=e;b[c+1]=e;b[c+2]=e}return a};b.Ra=function(a,b){return{x:-(a*V+Ra),y:-(b*V+Ra)}};b.Fa=function(){each(H,function(a,b){var c=l.rc(b),d=b[Sa],e=b[Ta],f=b[Ua],g=S-Va;c.save();f?(c.fillStyle=d,c.fillRect(0,0,S,S),c.fillStyle=e,c.fillRect(W,W,g,g)):(c.fillStyle=d,z(c,0,0,S,S,10),c.fillStyle=e,z(c,W,W,g,g,5));c.restore()})};b.eb=function(a,c){var d=c.V(),e=c.W();b.Ma(a,l.gc(c.Xa()),d,e);c.ma()&&(a.font=Wa,a.textAlign="center",
a.fillStyle="rgba(255,255,255,0.3)",a.fillText(c.ma(),d+S/2+1,1+e+(S+S-Y)/2),a.fillStyle="rgba(0,0,0,0.6)",a.fillText(c.ma(),d+S/2,e+(S+S-Y)/2))};b.fb=function(a){a.save();b.gb(a);each(d.na(),function(c,d){b.eb(a,d)});a.restore()};b.Ac=function(a){b.fb(a);b.Xb(a)};b.cb=function(a){d.pa()?b.Ac(a):b.fb(a)};b.gb=function(a){a.fillStyle="#444";a.fillRect(0,0,g,p);a.translate(k*m+g/2,e*m+p/2);a.scale(m,m)};b.Yb=function(a){var b=ResourceManager.Sa("shadow.png");each(d.na(),function(c,d){a.save();var e=
d.V()-Xa,f=d.W()-Xa;d.Xa()[Ya]&&a.drawImage(b,e,f);a.restore()})};b.Xb=function(a){a.save();if(!F){var c=document.createElement("canvas");c.height=canvas.height;c.width=canvas.width;var d=a.getImageData(0,0,a.canvas.width,a.canvas.height);F=b.oc(d);C=c.getContext("2d")}a.globalAlpha=0;C.putImageData(F,0,0);a.drawImage(C.canvas,0,0);a.restore()};b.Ma=function(a,b,c,d){c<u||d<v||c>B||d>h||a.drawImage(b,c,d)};b.Fd=function(a){a.save();b.gb(a);b.Yb(a);each(d.na(),function(c,d){a.save();var e=d.V(),f=
d.W(),g=d.lc();g?(g=ResourceManager.Sa(g),b.Ma(a,g,e,f)):b.eb(a,d);a.restore()});a.restore()};(function(){d.Aa(function(){f=c=0})})()};var S=71,W=8,Qa=65535,Z=0,ua=Z++,va=Z++,wa=Z++,xa=Z++,ya=Z++,za=Z++,Ca=Z++,Da=Z++,Z=0,R=Z++,ra=Z++,Z=0,L=Z++,Q=Z++,J=Z++,Ga=Z++,fa=Z++,ea=Z++,ba=Z++,Pa={Rc:{t:{name:"Energy Training",type:1,C:10,description:"",w:"",B:r},xc:{Qb:100}},Sc:{t:{name:"Energy Training 2",type:1,C:10,description:"",w:"",B:"PLAYER_ENERGY_TRAINING"},xc:{Qb:100}},ad:{t:{name:"Bomb",type:2,C:0,description:"Your basic timed explosion",w:"",B:r},ua:{p:0,r:50}},$c:{t:{name:"Deployer Efficiency",type:3,C:10,description:"",w:"-25 Energy Usage",
B:"WEAPON_BOMB"},va:{Qa:"WEAPON_BOMB",p:0,r:25}},Yc:{t:{name:"M2",type:3,C:10,description:"",w:"+1 Radius",B:"WEAPON_BOMB"},va:{Qa:"WEAPON_BOMB",p:r,r:r},Ea:{Y:2}},bd:{t:{name:"Carpet Bomb",type:2,C:30,description:"Destroys almost all blocks and explodes in circle. Very effective.",w:"",B:r},ua:{p:15E3,r:200}},Zc:{t:{name:"M2",type:3,C:20,description:"",w:"30% Faster Recharge",B:"WEAPON_CARPET_BOMB"},va:{Qa:"WEAPON_CARPET_BOMB",p:1E4,r:r}}},na=0,pa=1,oa=3,qa=4,Z=0,H={Kb:["box_timedmine_red.png","gray",
"rgba(255,0,0,0.8)",s,n,Z++],ya:["box_timedmine.png","gray","rgba(0,0,0,0.1)",s,n,Z++],xa:["box_qute.png","#FA2B31","rgba(0,0,0,0.1)",s,n,Z++],Fb:["box_qute.png","#FA2B31","orange",s,n,Z++],Ab:["box_explosion_yellow.png","white","rgba(0,0,0,0.1)",s,n,Z++],zb:["box_explosion_orange.png","rgba(0,0,0,0.1)","white",s,s,Z++],Lb:["box_zomb.png","#ABE319","rgba(0,0,0,0.1)",s,n,Z++],Vc:[r,"pink","rgba(0,0,0,0.1)",s,n,Z++],wa:[r,"cyan","rgba(0,0,0,0.1)",s,n,Z++],da:[r,"rgb(191, 44, 232)","rgba(0,0,0,0.1)",
s,n,Z++],Bb:[r,"rgba(191, 44, 232, 0.2)","rgba(0,0,0,0.1)",s,n,Z++],xb:[r,"cyan","rgba(255,0,0,0.8)",s,n,Z++],Gb:["box_stone_destructible.png","#4F83B3","#58B1C9",s,n,Z++],Db:[r,"#3A3A3A","#3A3A3A",n,s,Z++],Eb:[r,"#3A3A3A","#3A3A3A",n,s,Z++],yb:[r,"#3A3A3A","#3A3A3A",n,s,Z++],Hb:["box_stone_immovable.png","#263B7D","#285887",s,n,Z++],Ib:["box_stone_immovable.png","#282E4C","#2F4563",n,n,Z++],Wc:["box_wood_destructible.png","#4F83B3","#58B1C9",s,n,Z++],Xc:["box_wood_immovable.png","#263B7D","#285887",
s,n,Z++],Jb:[r,"rgba(255,0,0,0.5)","rgba(0,0,0,0.1)",s,n,Z++],Cb:["box_gold.png","#FFBF1F","#FFF146",s,n,Z++]},Oa="TILE_TIMEDMINE_RED TILE_TIMEDMINE TILE_QUTE TILE_QUTE_BUMP TILE_EXPLOSION_YELLOW TILE_EXPLOSION_ORANGE TILE_ZOMB TILE_BLASTER TILE_CHARGER TILE_GHOST TILE_GHOST_INCOGNITO TILE_CHARGER_RED TILE_STONE_DESTRUCTIBLE TILE_GRAVEL TILE_LEAVE TILE_ENTER TILE_STONE_IMMOVABLE TILE_STONE_SURROUND TILE_WOOD_DESTRUCTIBLE TILE_WOOD_IMMOVABLE TILE_TELEPORT TILE_GOLD".split(" "),V=S-1,Ra=V/2,Va=2*W,
Xa=(90-S)/2,Y=S-Va-16,Wa="bold "+Y.toString()+"px Helvetica",U=16,Ma=0,Ta=1,Sa=2,Ua=3,Ya=4,Na=5;
